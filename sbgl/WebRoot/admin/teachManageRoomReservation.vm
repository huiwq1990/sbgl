<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>北京电影学院摄影系 - 教学管理</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="">
<meta name="author" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="${cssDomain}/bootstrap.css" rel="stylesheet" type="text/css" />
<link href="${cssDomain}/global.css" rel="stylesheet" type="text/css" />

<!--[if lt IE 10]>
  <script src="../js/jquery.placeholder.js"></script>
  <script>
  $('input, textarea').placeholder();
  </script>
<![endif]-->
<!--[if lt IE 9]>
  <script src="../js/html5shiv.js"></script>
  <script src="../js/respond.min.js"></script>
<![endif]-->
<!--[if IE 7]>
<link rel="stylesheet" href="css/font-awesome-ie7.min.css">
<![endif]-->
</head>

<body id="admin">
<header id="header-wrap"><!--header-wrap-->
  <div class="nav-wrap clearfix">
    <div class="site-nav">
      <div class="dropdown">
        <a class="pos dropdown-toggle" data-hover="dropdown" href="#"><i class="icon-home"></i> 管理中心 <i class="icon-chevron-right"></i></a><!-- #BeginLibraryItem "/Library/siteNav.lbi" --><ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
          <li><a href="../index.html"><i class="icon-home"></i> 首页</a></li>
          <li class="divider"></li>
          <li><a href="../预约首页.html">我的预约</a></li>
          <li><a href="../消息中心-站内信.html">站内信</a></li>
          <li class="divider"></li>
          <li><a href="../设置页面-账户设置.html">设置与帮助</a></li>
          <li><a href="管理中心首页.html">管理中心</a></li>
        </ul>
          <!-- #EndLibraryItem --></div>
    </div>
	<div class="sub-nav">
      <ul class="nav nav-tabs nav-tabs-google">
        <li><a href="管理中心首页.html">首页</a></li>
        <li class="active"><a href="教学管理首页.html">教学</a></li>
        <li><a href="用户管理首页.html">用户</a></li>
        <li><a href="设备预约首页.html">器材</a></li>
        <li><a href="机房预约管理首页.html">机房</a></li>
        <li><a href="#">内容</a></li>
      </ul>
    </div>
    <ul class="account-wrap nav nav-pills pull-right">
      <li class="notice dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#"><i class="icon-bell icon-large"></i><span class="n-num label label-important">3</span></a>
        <ul class="dropdown-menu">
          <li><a href="#">消息1</a></li>
          <li><a href="#">消息2</a></li>
        </ul>
      </li>     
      <li class="social dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="username">陈诚</span><img src="../img/photo.jpg" width="32" height="32" class="img-circle"> <b class="caret"></b></a>
        <div class="dropdown-menu">
          <div class="media">
            <a class="pull-left" href="#">
              <img src="../img/photo.jpg" width="96" height="96" class="img-rounded">
            </a>
            <div class="media-body">
              <div class="media-heading"><h5><a href="#">陈诚</a></h5></div>
              <div class="info">2012级研究生 - 影像视觉效果研究方向</div>
              <div class="setting"><a href="#">账户设置</a></div>
              <button class="btn btn-primary" type="button">查看个人主页</button>
            </div>
          </div>
        </div>      
      </li>
    </ul>
  </div>
</header><!--/#header-wrap-->
<section id="main-wrap" class="clearfix"><!--main-wrap-->

      <!--admin-wrap start-->
      <div id="admin-wrap">
        <div id="admin-content" class="clearfix">    
            <!--control-bar start-->
            <div class="control-bar clearfix">
              <div class="title pull-left">布置新教学任务</div>
              <div class="tips">布置教学任务后，指定的收件人将会收到教学预约通知，收件人在相关说明的指导下完成机房预约。</div>
            </div><!--control-bar end-->
            
			<div id="msg">
              <form role="form">
                <div class="row">
                  <div class="send-to-warp">
                    <div class="form-group send-to">
                      <label class="sr-only" for="inputSendTo">收件人</label>
                      <input type="text" id="inputSendTo" class="send-to form-control input-lg" placeholder="添加收件人">
                    </div>
                  </div>
                  <div class="form-group user-group">
                    <a href="#exploreUser" action-type="showStuInClass" role="button" class="btn btn-white btn-large btn-block" data-toggle="modal"><i class="icon-group"> +</i></a>
                  </div>
                </div>
                <div class="form-group send-title">
                  <label class="sr-only" for="inputMsgTitle">标题</label>
                  <input type="text" class="form-control input-lg" id="inputMsgTitle" placeholder="添加标题">
                </div>
                <div class="msg-content-warp">
                  <div class="msg-content">
                    <textarea name="content" id="inputContent" style="width:100%;height:300px;visibility:hidden;"></textarea>                
                  </div>
                </div>
                <div class="form-group attach-file-warp">
                  <div class="btn btn-white btn-block file-input-button">
                      <i class="icon-paper-clip"></i>
                      <span>添加附件</span>
                      <input id="inputFilePath" type="file" name="files[]" multiple>
                  </div>
                  <p>附件上传说明</p>
                </div>
                <div class="clearfix"></div>
                <div class="rent-time form-group row">
                  <label for="inputDataRange" class="col-md-1 control-label">使用时间</label>
                  <div class="col-lg-6">
                    <div class="input-daterange row">
                      <div class="col-lg-5">
                        <input type="text" class="form-control" id="inputDataRange" name="start" placeholder="起始日期">
                      </div>
                      <div class="col-lg-1">
                        <span class="add-on">至</span>
                      </div>
                      <div class="col-lg-5">
                        <input type="text" class="form-control" id="inputDataRange2" name="end" placeholder="截止日期">
                      </div>
                    </div>
                  </div>
                </div>
                <div class="rent-time form-group row">
                  <label for="inputResource" class="col-md-1 control-label">指定设备/资源</label>
                  <div class="col-lg-6">
                    <label class="checkbox-inline">
                      <input type="checkbox" name="inputResource" id="inputResource1" value="1" checked="">MAC Pro工作站
                    </label>
                    <label class="checkbox-inline">
                      <input type="checkbox" name="inputResource" id="inputResource2" value="2" checked="">DELL工作站
                    </label>
                    <label class="checkbox-inline">
                      <input type="checkbox" name="inputResource" id="inputResource3" value="3" checked="">剪辑机房
                    </label>
                    <label class="checkbox-inline">
                      <input type="checkbox" name="inputResource" id="inputResource4" value="4" checked="">调色机房
                    </label>
                  </div>
                </div>
                <a class="btn btn-white" href="">取 消</a>
                <button type="submit" class="btn btn-primary">发 送</button>
              </form>
            </div>
        
		</div>

      </div>
      <!--equip-wrap end-->

      <!--sidebar start-->
      <div id="lside">
        <div class="list-group">
          <a href="教学管理首页.html" class="list-group-item">课程管理</a>
          <a href="教学管理-添加课程.html" class="list-group-item">添加课程</a>
          <a href="教学管理-设备预约安排.html" class="list-group-item">设备预约安排</a>
          <a href="教学管理-机房预约安排.html" class="list-group-item active">机房预约安排</a>
          <a href="教学管理-机房课程安排.html" class="list-group-item">机房课程安排</a>
		  <a href="教学管理-教学设置.html" class="list-group-item">设置</a>
        </div>
      </div>
      <!--sidebar end-->

</section>

<!-- Modal -->
<div id="exploreUser" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">浏览用户</h3>
  </div>
  <div class="modal-body">
      <div class="row control-bar">
        <div class="select-user-group col-md-5">
            <select class="select2 select-white"  style="width: 100%;">
              <option value="0">班级1</option>
              <option value="1">班级2</option>
              <option value="2">班级3</option>
            </select>
        </div>
        <div class="search-user col-md-7">
          <form class="form-group inner-search-icon">
            <input type="text" class="form-control" placeholder="按姓名搜索">
            <span class="icon-search"></span>
          </form>
        </div>
      </div>
      <div class="control-bar">
        <button class="btn btn-white" action-type="selectAllUser">全 选</button>
        <button class="btn btn-primary" action-type="cancelSelectAllUser" style="display: none">取消全选</button>
      </div>
      <div id="user-list" class="row">
        <ul class="media-list">
          <li data-id="1" data-name="用户1" class="media">
            <div class="pull-left">
              <img src="${imageDomain}/photo.jpg" width="46" height="46">
            </div>
            <div class="media-body">
              <div class="media-heading">用户1</div>
              <div class="text-muted">班级信息</div>
            </div>
          </li>
          <li data-id="2" data-name="用户2" class="media">
            <div class="pull-left">
              <img src="${imageDomain}/photo.jpg" width="46" height="46">
            </div>
            <div class="media-body">
              <div class="media-heading">用户2</div>
              <div class="text-muted">班级信息</div>
            </div>
          </li>
          <li data-id="3" data--name="用户3" class="media">
            <div class="pull-left">
              <img src="${imageDomain}/photo.jpg" width="46" height="46">
            </div>
            <div class="media-body">
              <div class="media-heading">用户3</div>
              <div class="text-muted">班级信息</div>
            </div>
          </li>
        </ul>
      </div>
  </div>
  <div class="modal-footer">
    <button class="btn btn-white" data-dismiss="modal" aria-hidden="true">取 消</button>
    <button class="btn btn-primary" action-type="getUserSendList">完 成</button>
  </div>
</div>

    <!-- javascript
    ================================================== -->
<script src="${jsDomain}/jquery.js"></script>
<script src="${jsDomain}/loader.min.js"></script>
<script src="${jsDomain}/select2.js"></script>
<script src="${jsDomain}/bootstrap-hover-dropdown.min.js"></script>
<script src="${jsDomain}/bfa.js"></script>
<script src="${jsDomain}/editor/kindeditor-min.js"></script>
<script src="${jsDomain}/editor/lang/zh_CN.js"></script>
<script src="${jsDomain}/bootstrap-datepicker.js"></script>
<script src="${jsDomain}/locales/bootstrap-datepicker.zh-CN.js"></script>

<script>
	$('.input-daterange').datepicker({
		language: 'zh-CN',
		format: 'yyyy-mm-dd',
		todayHighlight: true,
		autoclose: true
	});

	$("#inputSendTo").select2({
		createSearchChoice:function(term, data) { 
			if ($(data).filter(function() { return this.text.localeCompare(term)===0; }).length===0) {
				return {id:term, text:term};} 
			},
		multiple: true,
		data: [{id: 0, text: '用户名1'},{id: 1, text: '用户名2'},{id: 2, text: '用户名3'}]
	});
			
	var editor;
	KindEditor.ready(function(K) {
		editor = K.create('textarea[name="content"]', {
			resizeType : 1,
			allowPreviewEmoticons : false,
			allowImageUpload : false,
			items : [
				'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold', 'italic', 'underline',
				'removeformat', '|', 'justifyleft', 'justifycenter', 'justifyright', 'insertorderedlist',
				'insertunorderedlist', '|', 'emoticons', 'image', 'link']
		});
	});
	
	$('body').on('click', ('#createEquipRule .model-list > .list-item'), function () {
		if ($(this).children('i').hasClass('icon-check-empty')) {
			$(this).children('i').removeClass('icon-check-empty').addClass('icon-check');
			$(this).data('isSelect', 'true');
		} else if ($(this).children('i').hasClass('icon-check')) {
			$(this).children('i').removeClass('icon-check').addClass('icon-check-empty');
			$(this).data('isSelect', 'false');
		}
	});
	$('body').on('click', ('#createEquipRule #submit'), function () {
		var courseId = $('#inputCourseName').select2('val');
		if (courseId == '') {
			courseId = -1;	
		}
		var ruleName = $('#inputRuleName').val();
		alert(courseId + ',' + ruleName);
		$('.model-list > .list-item').each(function(index, elem) {
			if($(elem).data('isSelect')) {
            	var myData = $(elem).data();
				alert(myData.modelId);
			}
        });
	});
	$('#user-list').on('click', ('.media-list li.media'), function () {
		$(this).toggleClass("selected");
	});
	
	// 全选当前列表下的用户
	$('body').on('click', ('button[action-type|=selectAllUser]'), function () {
		$("#user-list .media-list li").each(function(index, el) {		// 遍历用户列表
			if (!$(this).hasClass('selected')) {		// 新课程安排
				$(this).addClass('selected');
			}
		});
		$(this).hide();
		$('button[action-type|=cancelSelectAllUser]').show();
	});
	// 取消全选当前列表下的用户
	$('body').on('click', ('button[action-type|=cancelSelectAllUser]'), function () {
		$("#user-list .media-list li").each(function(index, el) {		// 遍历用户列表
			if ($(this).hasClass('selected')) {		// 新课程安排
				$(this).removeClass('selected');
			}
		});
		$(this).hide();
		$('button[action-type|=selectAllUser]').show();
	});
	
	// 浏览用户完成按钮，获取所需发送用户的列表
	$("body").on('click', 'button[action-type|=getUserSendList]', function(event) {
		var userList = new Array();
		$("#user-list .media-list li").each(function(index, el) {		// 遍历用户列表
			var thisData = $(this).data();
			if ($(this).hasClass('selected')) {		// 新课程安排
				userList.push(thisData);
			}
		});
		console.log(userList);
		$(this).parent(".modal").hide();
	});
	
	// 获取全部班级和学生信息
	$("body").on('click', 'a[action-type|=showStuInClass]', function(event) {
		jQuery.ajax({
			url: "${webbaseurl}/getStuInClass.do",  
			type: "post",
			success: function(data,textStatus,jq) {
				console.log(data);

			},
			error: function(data,textStatus,jq) {
				alert("加载数据失败!");
			}
		});
	});
</script>
</body>
</html>
